function getRenderData(){"undefined"!=typeof rendered&&0==rendered&&$.ajax({url:dataUrl.render,type:"get",dataType:"json",xhrFields:{withCredentials:!0},success:function(e){0==e.info.error?("undefined"!=typeof e.box&&$.each(e.box,function(e,t){"undefined"!=typeof t.show&&1==t.show&&$("#"+e+"_box").removeClass("h")}),render(e.data)):alert(e.info.message)},error:function(e){alert("error")}})}function render(e){e=filter(e),$(".jstpl").each(function(t,r){var n,a=$(this),i=a.attr("tpl");"undefined"!=typeof tpls[i]?n=tpls[i]:(n=Handlebars.compile($(this).html()),tpls[i]=n),$("#"+i).html(n(e)).addClass("rendered")}),$.each(renderSuccess,function(e,t){t()})}function filter(e){for(x in dataFilter)"function"==typeof dataFilter[x]&&(e=dataFilter[x](e));return e}function showLazy(e){e.find("img.lazy:visible").each(function(){var e=$(this),t=e.attr("data");e.hasClass("auto")&&e.on("load",function(){var t=e.height(),r=e.parent(),n=r.height();if(t>n)e.css("margin-top",(n-t)/2+"px");else if(t<n){e.addClass("height-fix");var a=e.width(),i=r.width();e.css("margin-left",(i-a)/2+"px")}}),"undefined"==typeof t||""==$.trim(t)||"/"!=t.substr(0,1)&&"http"!=t.substr(0,4)||e.attr("src",t),e.removeClass("lazy").removeClass("auto")})}function init(){getRenderData()}$.ajaxPrefilter(function(e){corsProxy&&e.crossDomain&&(e.url="/proxy/index/?url="+encodeURIComponent(e.url),e.crossDomain=!1)}),Handlebars.registerHelper("object",function(e,t){return"object"==typeof e?e[t]:""}),Handlebars.registerHelper("equal",function(e,t,r){return e!=t?r.inverse(this):r.fn(this)});var tpls={},corsProxy=!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),renderSuccess={},dataFilter={};renderSuccess.base=function(){showLazy($("body"))},$(document).ready(function(){init()});